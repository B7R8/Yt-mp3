import{r as e,j as t,S as r,C as a}from"./Bo1Yacpa.js";import{M as s,X as n}from"./DYTh51ZO.js";import"./C1BFwDP_.js";const o=({value:e,onChange:r,disabled:a,maxDuration:s,isEndTime:n=!1,otherTime:o})=>{const l=(t,a)=>{const l=a.replace(/[^0-9]/g,"").slice(0,2);if(""===l&&""!==a)return;const i={...e,[t]:l},d=3600*parseInt(i.h)+60*parseInt(i.m)+parseInt(i.s);if(!s||s>=d){if(o){const e=3600*parseInt(o.h)+60*parseInt(o.m)+parseInt(o.s);if(n&&e>=d)return;if(!n&&d>=e)return}r(i)}},i=t=>{const a=e[t];""===a||"0"===a?r({...e,[t]:"00"}):1===a.length&&r({...e,[t]:a.padStart(2,"0")})},d=t=>{if(a)return;const l=parseInt(e[t]),i=(""+(("h"===t?99:59)>l?l+1:0)).padStart(2,"0"),d={...e,[t]:i},c=3600*parseInt(d.h)+60*parseInt(d.m)+parseInt(d.s);if(!s||s>=c){if(o){const e=3600*parseInt(o.h)+60*parseInt(o.m)+parseInt(o.s);if(n&&e>=c)return;if(!n&&c>=e)return}r(d)}},c=t=>{if(a)return;const l=parseInt(e[t]),i=(""+(l>0?l-1:"h"===t?99:59)).padStart(2,"0"),d={...e,[t]:i},c=3600*parseInt(d.h)+60*parseInt(d.m)+parseInt(d.s);if(!s||s>=c){if(o){const e=3600*parseInt(o.h)+60*parseInt(o.m)+parseInt(o.s);if(n&&e>=c)return;if(!n&&c>=e)return}r(d)}},m=t=>{if(a)return!0;const r=parseInt(e[t]),l=("h"===t?99:59)>r?r+1:0,i={...e,[t]:l.toString().padStart(2,"0")},d=3600*parseInt(i.h)+60*parseInt(i.m)+parseInt(i.s);if(s&&d>s)return!0;if(o){const e=3600*parseInt(o.h)+60*parseInt(o.m)+parseInt(o.s);if(n&&e>=d)return!0;if(!n&&d>=e)return!0}return!1},x=t=>{if(a)return!0;const r=parseInt(e[t]),l=r>0?r-1:"h"===t?99:59,i={...e,[t]:l.toString().padStart(2,"0")},d=3600*parseInt(i.h)+60*parseInt(i.m)+parseInt(i.s);if(s&&d>s)return!0;if(o){const e=3600*parseInt(o.h)+60*parseInt(o.m)+parseInt(o.s);if(n&&e>=d)return!0;if(!n&&d>=e)return!0}return!1},u=(()=>{const t=3600*parseInt(e.h)+60*parseInt(e.m)+parseInt(e.s);if(s&&t>s)return!0;if(o){const e=3600*parseInt(o.h)+60*parseInt(o.m)+parseInt(o.s);if(n&&e>=t)return!0;if(!n&&t>=e)return!0}return!1})();return t.jsxs("div",{className:"flex items-center gap-1 font-mono text-lg sm:text-2xl p-1.5 sm:p-2 rounded-md transition-all duration-200 "+(u?"bg-red-50 dark:bg-red-900/20 border-2 border-red-300 dark:border-red-600":"bg-gray-100 dark:bg-gray-700 border-2 border-transparent"),children:[t.jsxs("div",{className:"relative group",children:[t.jsx("button",{type:"button",onClick:()=>d("h"),disabled:a||m("h"),className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-4 h-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 disabled:cursor-not-allowed rounded-t-sm transition-opacity "+(a||m("h")?"opacity-0":"opacity-0 group-hover:opacity-100"),children:t.jsx("svg",{className:"w-2 h-2 text-gray-600 dark:text-gray-300 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})}),t.jsx("input",{type:"text",value:e.h,onChange:e=>l("h",e.target.value),onBlur:()=>i("h"),onFocus:e=>e.target.select(),onKeyDown:e=>{"ArrowUp"===e.key?(e.preventDefault(),d("h")):"ArrowDown"===e.key&&(e.preventDefault(),c("h"))},maxLength:2,className:"w-7 sm:w-9 text-center bg-transparent focus:outline-none",disabled:a}),t.jsx("button",{type:"button",onClick:()=>c("h"),disabled:a||x("h"),className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-4 h-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 disabled:cursor-not-allowed rounded-b-sm transition-opacity "+(a||x("h")?"opacity-0":"opacity-0 group-hover:opacity-100"),children:t.jsx("svg",{className:"w-2 h-2 text-gray-600 dark:text-gray-300 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),t.jsx("span",{children:":"}),t.jsxs("div",{className:"relative group",children:[t.jsx("button",{type:"button",onClick:()=>d("m"),disabled:a||m("m"),className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-4 h-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 disabled:cursor-not-allowed rounded-t-sm transition-opacity "+(a||m("m")?"opacity-0":"opacity-0 group-hover:opacity-100"),children:t.jsx("svg",{className:"w-2 h-2 text-gray-600 dark:text-gray-300 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})}),t.jsx("input",{type:"text",value:e.m,onChange:e=>l("m",e.target.value),onBlur:()=>i("m"),onFocus:e=>e.target.select(),onKeyDown:e=>{"ArrowUp"===e.key?(e.preventDefault(),d("m")):"ArrowDown"===e.key&&(e.preventDefault(),c("m"))},maxLength:2,className:"w-7 sm:w-9 text-center bg-transparent focus:outline-none",disabled:a}),t.jsx("button",{type:"button",onClick:()=>c("m"),disabled:a||x("m"),className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-4 h-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 disabled:cursor-not-allowed rounded-b-sm transition-opacity "+(a||x("m")?"opacity-0":"opacity-0 group-hover:opacity-100"),children:t.jsx("svg",{className:"w-2 h-2 text-gray-600 dark:text-gray-300 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),t.jsx("span",{children:":"}),t.jsxs("div",{className:"relative group",children:[t.jsx("button",{type:"button",onClick:()=>d("s"),disabled:a||m("s"),className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-4 h-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 disabled:cursor-not-allowed rounded-t-sm transition-opacity "+(a||m("s")?"opacity-0":"opacity-0 group-hover:opacity-100"),children:t.jsx("svg",{className:"w-2 h-2 text-gray-600 dark:text-gray-300 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})}),t.jsx("input",{type:"text",value:e.s,onChange:e=>l("s",e.target.value),onBlur:()=>i("s"),onFocus:e=>e.target.select(),onKeyDown:e=>{"ArrowUp"===e.key?(e.preventDefault(),d("s")):"ArrowDown"===e.key&&(e.preventDefault(),c("s"))},maxLength:2,className:"w-7 sm:w-9 text-center bg-transparent focus:outline-none",disabled:a}),t.jsx("button",{type:"button",onClick:()=>c("s"),disabled:a||x("s"),className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-4 h-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 disabled:cursor-not-allowed rounded-b-sm transition-opacity "+(a||x("s")?"opacity-0":"opacity-0 group-hover:opacity-100"),children:t.jsx("svg",{className:"w-2 h-2 text-gray-600 dark:text-gray-300 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})},l=({isOpen:l,onClose:i,videoDuration:d,isFetchingDuration:c=!1,onSave:m,initialEnabled:x=!1,initialStart:u="00:00:00",initialEnd:g="00:00:00"})=>{const[h,p]=e.useState(x),[b,f]=e.useState({h:"00",m:"00",s:"00"}),[y,v]=e.useState({h:"00",m:"00",s:"00"}),j=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=Math.floor(e%60);return{h:t.toString().padStart(2,"0"),m:r.toString().padStart(2,"0"),s:a.toString().padStart(2,"0")}},k=e=>{const t=e.split(":");return{h:t[0]||"00",m:t[1]||"00",s:t[2]||"00"}};e.useEffect(()=>{if(d&&d>0){const e=j(d);v(e)}},[d]),e.useEffect(()=>{"00:00:00"!==u&&f(k(u)),"00:00:00"!==g&&v(k(g)),p(x)},[x,u,g]);const w=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=Math.floor(e%60);return t>0?`${t}h ${r}m ${a}s`:r>0?`${r}m ${a}s`:a+"s"},N=(()=>{const e=3600*parseInt(b.h)+60*parseInt(b.m)+parseInt(b.s),t=3600*parseInt(y.h)+60*parseInt(y.m)+parseInt(y.s);return isNaN(e)||isNaN(t)?0:Math.max(0,Math.min(t,d||t)-e)})(),I=(()=>{const e=3600*parseInt(b.h)+60*parseInt(b.m)+parseInt(b.s),t=3600*parseInt(y.h)+60*parseInt(y.m)+parseInt(y.s);return!(isNaN(e)||isNaN(t)||e>=t||d&&t>d)})();return t.jsxs(s,{isOpen:l,onClose:i,title:"Trim Audio",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx(r,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-800 dark:text-gray-200"}),t.jsx("h2",{id:"modal-title",className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"Trim Audio"})]}),t.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[t.jsx("label",{htmlFor:"trim-toggle",className:"flex items-center cursor-pointer",children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"checkbox",id:"trim-toggle",className:"sr-only peer",checked:h,onChange:()=>p(!h)}),t.jsx("div",{className:"block bg-gray-600 peer-checked:bg-green-500 w-12 h-6 sm:w-14 sm:h-8 rounded-full transition-colors"}),t.jsx("div",{className:"dot absolute left-1 top-1 bg-white w-4 h-4 sm:w-6 sm:h-6 rounded-full transition-transform peer-checked:translate-x-5 sm:peer-checked:translate-x-6"})]})}),t.jsx("button",{onClick:i,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:t.jsx(n,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500"})})]})]}),h?t.jsxs(t.Fragment,{children:[d&&d>0&&t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsx(a,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),t.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:["Video Duration: ",w(d)]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4 mb-4 text-gray-800 dark:text-gray-200",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Start Time"}),t.jsx(o,{value:b,onChange:f,disabled:!1,maxDuration:d,isEndTime:!1,otherTime:y})]}),t.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-lg sm:text-xl",children:"--"}),t.jsxs("div",{className:"text-center",children:[t.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"End Time"}),t.jsx(o,{value:y,onChange:v,disabled:!1,maxDuration:d,isEndTime:!0,otherTime:b})]})]}),t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6 sm:mb-8 p-3 rounded-lg border "+(0===N?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":10>N?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"),children:[t.jsx(a,{className:"w-4 h-4 "+(0===N?"text-yellow-600 dark:text-yellow-400":10>N?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400")}),t.jsx("span",{className:"text-sm font-medium "+(0===N?"text-yellow-600 dark:text-yellow-400":10>N?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"),children:0===N?"Trimmed Audio Duration: 0s (Please set valid start and end times)":10>N?`Trimmed Audio Duration: ${w(N)} (Very short duration)`:"Trimmed Audio Duration: "+w(N)})]}),d&&(3600*parseInt(y.h)+60*parseInt(y.m)+parseInt(y.s)>d?t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[t.jsx(a,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),t.jsxs("span",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:["End time cannot exceed video duration (",w(d),")"]})]}):null)]}):t.jsx("div",{className:"flex items-center justify-center py-12 mb-6",children:c?t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[t.jsx(a,{className:"w-12 h-12 text-black dark:text-white animate-spin"}),t.jsx("span",{className:"text-lg text-black dark:text-white font-semibold",children:"Fetching video duration..."})]}):d&&d>0?t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[t.jsx(a,{className:"w-12 h-12 text-green-500 dark:text-green-400"}),t.jsx("span",{className:"text-base text-green-600 dark:text-green-400 font-medium",children:"Enable trim to get started"})]}):t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[t.jsx(a,{className:"w-12 h-12 text-gray-400"}),t.jsx("span",{className:"text-base text-gray-500 dark:text-gray-400",children:"Enable trim to get started"})]})}),t.jsx("div",{className:"flex justify-center",children:h?t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 w-full",children:[t.jsxs("button",{onClick:()=>{const e=`${b.h}:${b.m}:${b.s}`,t=`${y.h}:${y.m}:${y.s}`;m(h,e,t),i()},disabled:!I,className:"group relative flex-1 px-6 py-3 font-semibold rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-300 text-sm sm:text-base overflow-hidden "+(I?"text-white bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 focus:ring-blue-500 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95":"text-gray-400 bg-gray-300 dark:bg-gray-600 cursor-not-allowed shadow-sm"),children:[I&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("span",{className:"relative flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save"]})]}),t.jsxs("button",{onClick:()=>{p(!1),f({h:"00",m:"00",s:"00"}),v(d&&d>0?j(d):{h:"00",m:"00",s:"00"})},className:"group relative flex-1 px-6 py-3 font-semibold rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-300 text-sm sm:text-base overflow-hidden text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 hover:border-red-400 dark:hover:border-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 focus:ring-red-500 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/10 to-red-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("span",{className:"relative flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset All"]})]})]}):t.jsxs("button",{onClick:i,className:"group relative px-8 sm:px-12 py-3 sm:py-4 font-semibold rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-300 text-sm sm:text-base overflow-hidden text-white bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 focus:ring-red-500 shadow-xl hover:shadow-2xl transform hover:scale-105 active:scale-95",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("span",{className:"relative flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]})]})})]})};export{l as default};
